<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<AnchorPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="towergame.controller.BattleController" 
            prefWidth="1600.0" prefHeight="900.0"
            style="-fx-background: linear-gradient(to bottom, #1a1a2e, #16213e, #0f3460);">
    <stylesheets>
        <URL value="@../css/style.css" />
    </stylesheets>
    <children>
        <VBox fx:id="rootContainer" spacing="10.0" alignment="TOP_CENTER" 
              AnchorPane.leftAnchor="15.0" 
              AnchorPane.rightAnchor="15.0" 
              AnchorPane.topAnchor="10.0" 
              AnchorPane.bottomAnchor="10.0">
            
            <!-- Titre du jeu -->
            <!-- REMOVED TO SAVE SPACE -->
            
            <!-- Turn and status labels -->
            <Label fx:id="turnLabel" text="Tour 1" 
                   style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #ffffff; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.8), 5, 0, 0, 1);" />
            <Label fx:id="messageLabel" text="" 
                   style="-fx-font-size: 12px; -fx-text-fill: #4ecdc4; -fx-font-weight: bold;" />
            
            <!-- HP Text row -->
            <HBox spacing="100.0" alignment="CENTER" prefHeight="35.0">
                <!-- Hero HP Text -->
                <Label fx:id="playerHpText" text="100/100" 
                       style="-fx-font-size: 14px; -fx-text-fill: #4ecdc4; -fx-font-weight: bold;" />
                
                <!-- Fire separator (empty space) -->
                <VBox alignment="CENTER" prefWidth="100.0" />
                
                <!-- Boss HP Text -->
                <Label fx:id="bossHpText" text="100/100" 
                       style="-fx-font-size: 14px; -fx-text-fill: #ff6b6b; -fx-font-weight: bold;" />
            </HBox>
            
            <!-- Battle entities display -->
            <HBox spacing="60.0" alignment="CENTER" VBox.vgrow="ALWAYS" prefHeight="400.0"
                  style="-fx-background-color: rgba(0,0,0,0.3); -fx-background-radius: 15; -fx-padding: 20;">
                
                <!-- HERO section (LEFT) - Sprite only -->
                <VBox alignment="CENTER" spacing="10.0" prefWidth="320.0" prefHeight="400.0" 
                      style="-fx-padding: 10; -fx-background-color: rgba(78,205,196,0.1); -fx-background-radius: 10;">
                    <ImageView fx:id="playerSprite" fitWidth="280.0" fitHeight="350.0" 
                               preserveRatio="true" pickOnBounds="true" 
                               style="-fx-effect: dropshadow(gaussian, rgba(0,200,255,0.4), 15, 0, 0, 5);" />
                </VBox>

                <!-- VS separator with fire attack effect -->
                <VBox alignment="CENTER" spacing="10.0" prefWidth="60.0" prefHeight="400.0">
                    <ImageView fx:id="fireAttackImageView" fitWidth="60.0" fitHeight="60.0" 
                               preserveRatio="true" pickOnBounds="true"
                               opacity="0.0"
                               style="-fx-effect: dropshadow(gaussian, rgba(255,0,0,0.6), 10, 0, 0, 3);" />
                </VBox>

                <!-- BOSS section (RIGHT) - Sprite only -->
                <VBox alignment="CENTER" spacing="10.0" prefWidth="320.0" prefHeight="400.0" 
                      style="-fx-padding: 10; -fx-background-color: rgba(255,107,107,0.1); -fx-background-radius: 10;">
                    <ImageView fx:id="enemySprite" fitWidth="280.0" fitHeight="350.0" 
                               preserveRatio="true" pickOnBounds="true" 
                               style="-fx-effect: dropshadow(gaussian, rgba(255,0,0,0.4), 15, 0, 0, 5);" />
                    <!-- Status label below sprite -->
                    <Label fx:id="enemyStatusLabel" text="" 
                           style="-fx-font-size: 12px; -fx-text-fill: #ffaa00; -fx-font-weight: bold;" />
                </VBox>
            </HBox>

            <Separator style="-fx-background-color: #ffd700; -fx-pref-height: 2;" />

            <!-- Log/Narration section -->
            <VBox alignment="TOP_CENTER" spacing="5.0" VBox.vgrow="ALWAYS" prefHeight="150.0"
                  style="-fx-background-color: rgba(0,0,0,0.6); -fx-background-radius: 15; -fx-padding: 10;">
                <Label fx:id="narrativeLabel" text="Le combat commence..." 
                       style="-fx-font-size: 11px; -fx-text-fill: #e0e0e0; -fx-font-family: 'Courier New';" 
                       wrapText="true" alignment="TOP_LEFT" maxHeight="150.0" />
            </VBox>

            <!-- Actions section - FlowPane pour supporter plus de boutons -->
            <VBox alignment="CENTER" spacing="8.0" 
                  style="-fx-background-color: rgba(0,0,0,0.4); -fx-background-radius: 15; -fx-padding: 10; -fx-min-height: 80;">
                <FlowPane fx:id="actionsBox" hgap="10" vgap="8" alignment="CENTER" 
                          style="-fx-padding: 8;" prefWrapLength="1500" />
            </VBox>
        </VBox>
    </children>
</AnchorPane>
